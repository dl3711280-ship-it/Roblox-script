local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local ScreenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
local ToggleButton = Instance.new("TextButton", ScreenGui)
ToggleButton.Size = UDim2.new(0,100,0,40)
ToggleButton.Position = UDim2.new(0,10,0,10)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0,255,0)
ToggleButton.Text = "SilentAim OFF"

local FovBox = Instance.new("TextBox", ScreenGui)
FovBox.Size = UDim2.new(0,60,0,30)
FovBox.Position = UDim2.new(0,120,0,15)
FovBox.Text = "50"

local FovCircle = Drawing.new("Circle")
FovCircle.Visible = true
FovCircle.Thickness = 2
FovCircle.Color = Color3.fromRGB(0,255,0)
FovCircle.Radius = 50
FovCircle.Filled = false

local Enabled = false
ToggleButton.MouseButton1Click:Connect(function()
    Enabled = not Enabled
    ToggleButton.Text = Enabled and "SilentAim ON" or "SilentAim OFF"
    ToggleButton.BackgroundColor3 = Enabled and Color3.fromRGB(0,200,0) or Color3.fromRGB(200,0,0)
end)

FovBox.FocusLost:Connect(function()
    local val = tonumber(FovBox.Text)
    if val then
        FovCircle.Radius = val
    end
end)

local function getClosestNPC()
    local closest, dist = nil, math.huge
    for _,npc in pairs(workspace:GetChildren()) do
        if npc:FindFirstChild("HumanoidRootPart") and npc:FindFirstChildOfClass("Humanoid") then
            local pos, onScreen = Camera:WorldToViewportPoint(npc.HumanoidRootPart.Position)
            if onScreen then
                local mag = (Vector2.new(pos.X,pos.Y) - UserInputService:GetMouseLocation()).Magnitude
                if mag < FovCircle.Radius and mag < dist then
                    dist = mag
                    closest = npc
                end
            end
        end
    end
    return closest
end

RunService.RenderStepped:Connect(function()
    FovCircle.Position = UserInputService:GetMouseLocation()
end)

local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt,false)
mt.__namecall = function(self,...)
    local args = {...}
    if Enabled and getnamecallmethod()=="FireServer" and typeof(args[2])=="Vector3" then
        local npc = getClosestNPC()
        if npc then
            args[2] = npc.HumanoidRootPart.Position
            return old(self,unpack(args))
        end
    end
    return old(self,...)
end
