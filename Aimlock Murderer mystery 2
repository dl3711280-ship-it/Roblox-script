local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 200, 0, 100)
Frame.Position = UDim2.new(0, 10, 0, 10)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

local ToggleButton = Instance.new("TextButton", Frame)
ToggleButton.Size = UDim2.new(0, 180, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0, 10)
ToggleButton.Text = "Aimlock: OFF"
ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ToggleButton.TextColor3 = Color3.new(1,1,1)

local FovBox = Instance.new("TextBox", Frame)
FovBox.Size = UDim2.new(0, 180, 0, 30)
FovBox.Position = UDim2.new(0, 10, 0, 60)
FovBox.Text = "45"
FovBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
FovBox.TextColor3 = Color3.new(1,1,1)

local Circle = Drawing.new("Circle")
Circle.Color = Color3.fromRGB(0,255,0)
Circle.Thickness = 2
Circle.NumSides = 64
Circle.Filled = false
Circle.Transparency = 1
Circle.Radius = tonumber(FovBox.Text)
Circle.Visible = true

local cam = game.Workspace.CurrentCamera
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local AimlockEnabled = false
local Target

ToggleButton.MouseButton1Click:Connect(function()
    AimlockEnabled = not AimlockEnabled
    ToggleButton.Text = AimlockEnabled and "Aimlock: ON" or "Aimlock: OFF"
end)

FovBox.FocusLost:Connect(function()
    local val = tonumber(FovBox.Text)
    if val then
        Circle.Radius = val
    end
end)

RunService.RenderStepped:Connect(function()
    Circle.Position = cam.ViewportSize/2
    if AimlockEnabled then
        local closest,dist
        for _,plr in pairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("Head") then
                local pos,onscreen = cam:WorldToViewportPoint(plr.Character.Head.Position)
                if onscreen then
                    local mag = (Vector2.new(pos.X,pos.Y)-cam.ViewportSize/2).Magnitude
                    if mag < Circle.Radius and (not dist or mag < dist) then
                        dist = mag
                        closest = plr
                    end
                end
            end
        end
        Target = closest
        if Target and Target.Character and Target.Character:FindFirstChild("Head") then
            cam.CFrame = CFrame.new(cam.CFrame.Position, Target.Character.Head.Position)
        end
    end
end)
